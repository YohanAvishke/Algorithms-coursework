<!DOCTYPE html>
<html>
<head>
    <title>Basic sigma.js example</title>
    <style type="text/css">
        body {
            margin: 0;
        }

        #container {
            position: absolute;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="container"></div>
<script src="build/sigma.require.js"></script>
<!--other plugins-->
<script src="plugins/sigma.parsers.json/sigma.parsers.json.js"></script><!--read json-->
<script src="plugins/sigma.plugins.dragNodes/sigma.plugins.dragNodes.js"></script><!--drag nodes-->
<script src="plugins/sigma.plugins.animate/sigma.plugins.animate.js"></script><!--no overlap-->
<script src="plugins/sigma.layout.noverlap/sigma.layout.noverlap.js"></script><!--no overlap-->
<script>
    var i,
        s,
        N = 10,
        E = 15,
        g = {
            nodes: [],
            edges: []
        };

    /* Generate a random graph:
    for (i = 0; i < N; i++)
        g.nodes.push({
            id: 'n' + i,
            label: 'Node ' + i,
            x: Math.random(),
            y: Math.random(),
            size: 1,
            color: '#666'
        });

    for (i = 0; i < E; i++)
        g.edges.push({
            id: 'e' + i,
            source: 'n' + (Math.random() * N | 0),
            target: 'n' + (Math.random() * N | 0),
            size: 1,
            color: '#ccc'
        });*/

    // Instantiate sigma:
    s = sigma.parsers.json('data/graph_data.json', {
        container: 'container',

        renderer: {
            container: document.getElementById('container'),
            type: sigma.renderers.canvas
        },
        settings: {
            minArrowSize: 10
        }
    });

    // Initialize the dragNodes plugin:
    var dragListener = sigma.plugins.dragNodes(s, s.renderers[0]);

    dragListener.bind('startdrag', function (event) {
        console.log(event);
    });
    dragListener.bind('drag', function (event) {
        console.log(event);
    });
    dragListener.bind('drop', function (event) {
        console.log(event);
    });
    dragListener.bind('dragend', function (event) {
        console.log(event);
    });

    // Configure the noverlap layout:
    var noverlapListener = s.configNoverlap({
        nodeMargin: 0.1,
        scaleNodes: 1.05,
        gridSize: 75,
        easing: 'quadraticInOut', // animation transition function
        duration: 10000   // animation duration. Long here for the purposes of this example only
    });
    // Bind the events:
    noverlapListener.bind('start stop interpolate', function (e) {
        console.log(e.type);
        if (e.type === 'start') {
            console.time('noverlap');
        }
        if (e.type === 'interpolate') {
            console.timeEnd('noverlap');
        }
    });
    // Start the layout:
    s.startNoverlap();

    console.log(g);
</script>
</body>
</html>